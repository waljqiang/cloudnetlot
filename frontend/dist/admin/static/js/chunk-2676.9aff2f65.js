(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2676"],{"0Bzg":function(t,e,a){"use strict";a.r(e);var n=a("YEIV"),i=a.n(n),o=a("AoZH"),s=a("Ks2Z"),r={data:function(){var t;return{fullscreenLoading:!1,loading_txt:"请稍后……",loading_bgcolor:"rgba(0, 0, 0, 0.7)",column:[{name:"",width:"5%",type:"selection"," code":"",prop:"",sortable:!1},(t={name:this.$t("common.list_sn"),width:"5%"},i()(t,"width","50"),i()(t,"type","id"),i()(t,"prop",""),i()(t,"sortable",!1),t),{name:"产品名称",width:"15%",type:"",prop:"prtname",sortable:"custom",sortData:"name"},{name:"产品类型",width:"15%",type:"",prop:"type_txt",sortable:"custom",sortData:"type"},{name:"产品型号",width:"11%",type:"",prop:"size",sortable:"custom",sortData:"size"},{name:"状态",width:"12%",type:"",prop:"status_txt",sortable:"custom",sortData:"status"},{name:"所属用户",width:"12%",type:"",prop:"username",sortable:"custom",sortData:"username"},{name:"创建时间",width:"15%",type:"",prop:"created_at",sortable:"custom",sortData:"created_at"},{name:"操作",width:"10%",type:"",prop:"config_btn",sortable:!1}],thisgedata:[],pageoffset:10,pagelayout:"total,sizes, prev, pager, next, jumper",pageindex:1,total:0,ispage:!0,tableH:0,order_field:"created_at",order_sort:"desc",check_data:[],activeName:"first",dialogVisible:!1,radio:1,pid:""}},components:{"table-counter":o.a},methods:{goDetails:function(t){this.$router.push({name:"product_info",query:{id:t}})},setSort:function(t){"ascending"==t.order?this.order_sort="asc":this.order_sort="desc",this.order_field=t.prop,this.getList()},setCheckData:function(t){this.check_data=t},setPageOffset:function(t){this.pageoffset=t,this.getList()},setPageIndex:function(t){this.pageindex=t,this.getList()},showWindow:function(t){this.pid=t,this.dialogVisible=!0},audit:function(){var t=this;this.fullscreenLoading=!0;var e={prtid:this.pid,enable:this.radio};Object(s.a)(e).then(function(e){t.fullscreenLoading=!1,1e4==e.status?(t.$message({message:"操作成功",type:"success",offset:100}),t.dialogVisible=!1):t.$message({message:"操作失败",type:"error",offset:100})}).catch(function(e){t.fullscreenLoading=!1})},getList:function(){var t=this,e={pageIndex:this.pageindex,pageOffset:this.pageoffset,sortKey:this.order_field,sort:this.order_sort,keyword:""};Object(s.c)(e).then(function(e){if(t.fullscreenLoading=!1,1e4==e.status){var a=e.data;t.handleTable(a.list,a.total)}else t.$message({message:t.$t("msg.get_loading_error"),type:"error",offset:100})}).catch(function(e){t.fullscreenLoading=!1})},handleTable:function(t,e){for(var a=0;a<t.length;a++){t[a].istruedata=!0;var n="";1==t[a].type&&(t[a].type_txt="路由器"),1==t[a].status?t[a].status_txt="未发布":2==t[a].status?(t[a].status_txt="等待审核",n='<button type="primary" icon="el-icon-setting" onclick="showWindow(\''+t[a].prtid+"')\" >审核</button>"):3==t[a].status?t[a].status_txt="发布失败":4==t[a].status&&(t[a].status_txt="发布成功"),t[a].config_btn="<div>                                    "+n+'<button type="primary" icon="el-icon-setting" onclick="goDetails(\''+t[a].prtid+"')\" >详情</button>                                </div>"}this.total=parseInt(e),this.thisgedata=t}},beforeMount:function(){},mounted:function(){this.$nextTick(function(){this.fullscreenLoading=!0,this.getList(),window.showWindow=this.showWindow,window.goDetails=this.goDetails})},beforeDestroy:function(){window.showWindow=void 0,window.goDetails=void 0}},l=(a("v2qb"),a("KHd+")),c=Object(l.a)(r,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{"element-loading-text":t.loading_txt,"element-loading-background":t.loading_bgcolor}},[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"产品列表",name:"first"}},[a("table-counter",{attrs:{column:t.column,thisdata:t.thisgedata,pagesizes:!1,pagelayout:t.pagelayout,pageoffset:t.pageoffset,pageindex:t.pageindex,total:t.total,ispage:t.ispage,tableheight:t.tableH,unchecked:!0},on:{listenPageIndex:t.setPageIndex,listenPageOffset:t.setPageOffset,listenCheckData:t.setCheckData,listenSort:t.setSort}})],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"产品审核",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-radio",{attrs:{label:1},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("通过申请")]),t._v(" "),a("el-radio",{attrs:{label:0},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("拒绝申请")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.audit}},[t._v("确 定")])],1)],1)],1)},[],!1,null,"0f457dd6",null);c.options.__file="list.vue";e.default=c.exports},AoZH:function(t,e,a){"use strict";var n={props:["column","thisdata","pagesizes","pagelayout","pageoffset","pageindex","total","ispage","tableheight","unchecked","rowcurrent"],data:function(){return{tableData:[],tableH:this.tableheight?this.tableheight:40*(this.pageoffset+1),isrowcurrent:!!this.rowcurrent,getRowKeys:function(t){return t.m_sn},sizes:[globalPageOffset,30,50,100],emptytext:this.$t("msg.emptytext")}},mounted:function(){this.$nextTick(function(){this.addTrList()})},watch:{thisdata:function(t,e){this.$refs.multipleTable.clearSelection(),this.addTrList()},pageindex:function(t,e){this.$refs.multipleTable.clearSelection(),this.addTrList()},pageoffset:function(t,e){this.$refs.multipleTable.clearSelection(),this.addTrList()}},methods:{getRowKey:function(t){return t.id},tableHeaderClass:function(){return"table_header"},indexMethod:function(t){return(this.pageindex-1)*this.pageoffset+1+t},tableRowClassName:function(t){t.row;return t.rowIndex%2==0?"tr_even row_style":"tr_odd row_style"},tdClassName:function(t){var e=t.row;t.column,t.rowIndex,t.columnIndex;if(!e.istruedata)return"dom_off"},sortChange:function(t){this.$emit("listenSort",t)},handleSizeChange:function(t){this.$emit("listenPageOffset",t)},handleCurrentChange:function(t){this.$emit("listenPageIndex",t)},handleSelectionChange:function(t){this.$emit("listenCheckData",t)},selectable:function(t){return this.unchecked?0==t.state?0:(t.state,1):1},toggleSelection:function(t){var e=this;t.forEach(function(t){1==t.ischecked&&e.$refs.multipleTable.toggleRowSelection(t)})},addTrList:function(){this.tableData=[];for(var t=0;t<this.thisdata.length;t++){var e=this.thisdata[t];this.total-t>0&&e?this.tableData.push(this.thisdata[t]):this.ispage}this.toggleSelection(this.tableData)}}},i=(a("RkeX"),a("KHd+")),o=Object(i.a)(n,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{ref:"multipleTable",attrs:{"row-key":t.getRowKey,height:t.tableH,"empty-text":t.emptytext,"highlight-current-row":t.isrowcurrent,"row-class-name":t.tableRowClassName,"header-row-class-name":t.tableHeaderClass,"cell-class-name":t.tdClassName,data:t.tableData},on:{"sort-change":t.sortChange,"selection-change":t.handleSelectionChange}},[t._l(t.column,function(e,n){return["selection"==e.type?a("el-table-column",{attrs:{"reserve-selection":!0,align:"left",prop:e.prop,type:e.type,"min-width":e.width,selectable:t.selectable}}):"id"==e.type?a("el-table-column",{attrs:{align:"left",type:"index",label:e.name,width:"70px",sortable:e.sortable},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                 "+t._s((t.pageindex-1)*t.pageoffset+e.$index+1)+"\n             ")]}}])}):a("el-table-column",{attrs:{type:e.type,align:"left",prop:e.sortData,label:e.name,"min-width":e.width,sortable:e.sortable,"show-overflow-tooltip":!1},scopedSlots:t._u([{key:"default",fn:function(n){return[a("div",{domProps:{innerHTML:t._s(n.row[e.prop])}})]}}])})]})],2),t._v(" "),[t.ispage?a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],staticClass:"tableAlign ",attrs:{background:"",small:"","current-page":t.pageindex,"page-size":t.pageoffset,"page-sizes":t.sizes,layout:t.pagelayout,total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}):t._e()]],2)},[],!1,null,"da389e6a",null);o.options.__file="table.vue";e.a=o.exports},ApcH:function(t,e,a){},Ks2Z:function(t,e,a){"use strict";a.d(e,"c",function(){return i}),a.d(e,"a",function(){return o}),a.d(e,"b",function(){return s});var n=a("t3Un");function i(t){return Object(n.a)({url:"backend/admin/develop/product/list",method:"post",data:t})}function o(t){return Object(n.a)({url:"backend/admin/develop/product/approve",method:"post",data:t})}function s(t){return Object(n.a)({url:"backend/admin/develop/product/info",method:"get",params:t})}},"RU/L":function(t,e,a){a("Rqdy");var n=a("WEpk").Object;t.exports=function(t,e,a){return n.defineProperty(t,e,a)}},RkeX:function(t,e,a){"use strict";var n=a("akQS");a.n(n).a},Rqdy:function(t,e,a){var n=a("Y7ZC");n(n.S+n.F*!a("jmDH"),"Object",{defineProperty:a("2faE").f})},SEkw:function(t,e,a){t.exports={default:a("RU/L"),__esModule:!0}},YEIV:function(t,e,a){"use strict";e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(a("SEkw"));e.default=function(t,e,a){return e in t?(0,n.default)(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}},akQS:function(t,e,a){},v2qb:function(t,e,a){"use strict";var n=a("ApcH");a.n(n).a}}]);